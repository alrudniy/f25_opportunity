{% extends "base.html" %}

{% block extra_css %}
<style>
    /* Light theme with pastel blue colors */
    html[data-theme="light"] {
        background-color: #f0faff; /* Very light pastel blue */
        color: #2c3e50; /* Dark slate blue */
    }
    html[data-theme="light"] a {
        color: #3498db; /* A nice blue for links */
    }
    html[data-theme="light"] input, html[data-theme="light"] button, html[data-theme="light"] textarea {
        background-color: #ffffff;
        color: #2c3e50;
        border: 1px solid #bdc3c7;
        padding: 5px;
        border-radius: 3px;
    }
    html[data-theme="light"] button {
        background-color: #a9cce3; /* Soft blue for buttons */
        border: 1px solid #85b4d3;
        cursor: pointer;
    }

    /* A more aesthetic dark theme */
    html[data-theme="dark"] {
        background-color: #2c3e50; /* Dark Slate Blue */
        color: #ecf0f1; /* Cloud White */
    }
    html[data-theme="dark"] a {
        color: #5dade2; /* Lighter blue for links */
    }
    html[data-theme="dark"] input, html[data-theme="dark"] button, html[data-theme="dark"] textarea {
        background-color: #34495e; /* Wet Asphalt */
        color: #ecf0f1;
        border-color: #566573;
        padding: 5px;
        border-radius: 3px;
    }
    html[data-theme="dark"] button {
        cursor: pointer;
    }
</style>
{% endblock %}


{% block content %}
<h2>User Settings</h2>
<form method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Save Settings</button>
</form>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const themeRadios = document.querySelectorAll('input[name="theme"]');
        
        function setTheme(mode) {
            if (mode !== "light" && mode !== "dark" && mode !== "auto") {
                mode = "auto";
            }

            let effectiveTheme = mode;
            if (mode === "auto") {
                const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                effectiveTheme = prefersDark ? 'dark' : 'light';
            }
            
            document.documentElement.dataset.theme = effectiveTheme;
        }

        themeRadios.forEach(radio => {
            radio.addEventListener('change', function() {
                setTheme(this.value);
            });
        });

        const currentThemeRadio = document.querySelector('input[name="theme"]:checked');
        if (currentThemeRadio) {
            setTheme(currentThemeRadio.value);
        }

        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            const currentThemeRadio = document.querySelector('input[name="theme"]:checked');
            if (currentThemeRadio && currentThemeRadio.value === 'auto') {
                setTheme('auto');
            }
        });
    });
</script>
{% endblock %}
